<%- include('../_layouts/admin_header') %>
<a href="/admin/products" class="btn btn-outline-primary btn-sm float-right mt-5"><i class="fa fa-arrow-left"
                                                                                     aria-hidden="true"></i> Back to
    Dashboard</a>
<div class="clearfix"></div>
<h1 class="page-title">Add New Product </h1>


<form action="/admin/products/add-product" method="POST" class="mt-3" enctype="multipart/form-data">

    <div class="row">
        <div class="col-md-8">
            <div class="form-group">
                <label>Title</label>
                <input type="text" class="form-control" name="title" value="<%= title %>">
            </div>

            <div class="form-group">
                <label>Description</label>
                <textarea class="form-control" name="desc"><%= desc %></textarea>
            </div>

            <div class="form-group">
                <label>Price</label>
                <input type="text" class="form-control" name="price" value="<%= price %>">
            </div>

            <div class="form-group">
                <label>Category</label>
                <select name="category" class="form-control">
                    <% categories.forEach( (cat) => { %>
                    <option value="<%= cat.slug %>"><%= cat.title %></option>
                    <% }) %>
                </select>
            </div>
        </div>

        <div class="col-md-4">
            <div class="form-group">
                <label>Image</label>
                <input type="file" class="form-control" name="image" id="img">
                <img src="#" id="imgPreview">
            </div>
        </div>

    </div>
    <button type="submit" class="btn btn-secondary">Submit</button>
</form>
<script>
    $(function () {
        function readURL(input) {
            if (input.files && input.files[0]) {
                let reader = new FileReader();

                reader.onload = function (e) {
                    $('#imgPreview').attr('src', e.target.result)
                }

                reader.readAsDataURL(input.files[0])
            }
        }

        $('#img').change(function () {
            readURL(this);
        });
    });
</script>
<%- include('../_layouts/admin_footer') %>
